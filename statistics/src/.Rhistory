reacteur_3600 <- read.csv("C:\\Users\\Mathis\\OneDrive\\Documents\\PROJET\\Projet-Simulation-Aleatoire\\statistics\\statistics_output\\2025_11_29_17_51_29\\reactor_history_2025_11_29_17_51_29.csv")
view(reacteur_3600)
traj_3600 <- read.csv("C:\\Users\\Mathis\\OneDrive\\Documents\\PROJET\\Projet-Simulation-Aleatoire\\statistics\\statistics_output\\2025_11_29_17_51_29\\neutrons_trajectories_2025_11_29_17_51_29.csv")
sommes_fissions <- reacteur_3600 %>%
summarise(
Fission_2 = sum(fissions_prod_2, na.rm = TRUE),
Fission_3 = sum(fissions_prod_3, na.rm = TRUE),
Fission_4 = sum(fissions_prod_4, na.rm = TRUE),
Fission_5 = sum(fissions_prod_5, na.rm = TRUE)
)
tableau_vertical <- sommes_fissions %>%
pivot_longer(cols = everything(), names_to = "Type_Fission", values_to = "Total")
print(tableau_vertical)
duree_vie_df <- traj_3600 %>%
group_by(neutron_id) %>%
summarise(
duree_totale = n()
)
ggplot(duree_vie_df, aes(x = duree_totale)) +
geom_histogram(binwidth = 1, fill = "purple") +
scale_y_sqrt() +
theme_minimal() +
labs(title = "Distribution (Échelle Racine Carrée)",
x = "Durée totale",
y = "Nombre de neutrons")
duree_par_type_indiv <- traj_3600 %>%
group_by(neutron_id, type) %>%
summarise(duree_etat = n(), .groups = "drop")
moyenne_par_type <- duree_par_type_indiv %>%
group_by(type) %>%
summarise(
duree_moyenne = mean(duree_etat),
ecart_type = sd(duree_etat),
nombre_neutrons_concernes = n()
)
moyenne_par_type$type <- factor(moyenne_par_type$type,
levels = c("fast", "epithermal", "thermal"))
ggplot(moyenne_par_type, aes(x = type, y = duree_moyenne, fill = type)) +
geom_col(color = "black", alpha = 1) +
geom_text(aes(label = round(duree_moyenne, 1)), vjust = -0.5, fontface = "bold") +
scale_fill_manual(values = c(
"fast"       = "#4575b4",
"epithermal" = "#fdae61",
"thermal"    = "#d73027"
)) +
theme_minimal() +
labs(title = "Temps de résidence moyen par état",
y = "Durée moyenne (pas de temps)",
x = "Type de neutron")
duree_par_type_indiv <- traj_3600 %>%
group_by(neutron_id, type) %>%
summarise(duree_etat = n(), .groups = "drop")
moyenne_par_type <- duree_par_type_indiv %>%
group_by(type) %>%
summarise(
duree_moyenne = mean(duree_etat),
ecart_type = sd(duree_etat),
nombre_neutrons_concernes = n()
)
moyenne_par_type$type <- factor(moyenne_par_type$type,
levels = c("fast", "epithermal", "thermal"))
ggplot(moyenne_par_type, aes(x = type, y = duree_moyenne, fill = type)) +
geom_col(color = "black", alpha = 1) +
geom_text(aes(label = round(duree_moyenne, 1)), vjust = -0.5, fontface = "bold") +
scale_fill_manual(values = c(
"fast"       = "#4575b4",
"epithermal" = "#fdae61",
"thermal"    = "#d73027"
)) +
theme_minimal() +
labs(title = "Temps de résidence moyen par état",
y = "Durée moyenne (pas de temps)",
x = "Type de neutron")
evolution_pop <- traj_3600 %>%
count(time_step, type) %>%
mutate(type = factor(type, levels = c("fast", "epithermal", "thermal")))
ggplot(evolution_pop, aes(x = time_step, y = n, fill = type)) +
geom_area(alpha = 0.9, size = 0) +
scale_fill_manual(
values = c(
"fast"       = "#d73027",
"epithermal" = "#fdae61",
"thermal"    = "#4575b4"
),
labels = c(
"fast"       = "thermal",
"epithermal" = "epithermal",
"thermal"    = "fast"
),
name = "Type de Neutron"
) +
theme_minimal() +
labs(title = "Dynamique de thermalisation",
x = "Temps",
y = "Nombre de neutrons")
ggplot(traj_3600, aes(x = x, y = y)) +
geom_bin2d(binwidth = c(1, 1)) +
scale_fill_viridis_c(option = "magma") +
coord_fixed() +
theme_minimal() +
labs(title = "Distribution spatiale de tous les neutrons",
subtitle = "Données cumulées (tous les pas de temps)",
fill = "NB Neutrons")
stats_neutrons <- traj_3600 %>%
arrange(neutron_id, time_step) %>%
group_by(neutron_id) %>%
mutate(
dx = x - lag(x, default = first(x)),
dy = y - lag(y, default = first(y)),
dist_step = sqrt(dx^2 + dy^2)
) %>%
summarise(
distance_totale = sum(dist_step, na.rm = TRUE),
duree_vie = n(),
.groups = "drop"
)
top_neutrons_ids <- stats_neutrons %>%
arrange(desc(distance_totale)) %>%
head(5) %>%
pull(neutron_id)
data_trajectoires <- traj_3600 %>%
filter(neutron_id %in% top_neutrons_ids) %>%
arrange(neutron_id, time_step)
ggplot(data_trajectoires, aes(x = x, y = y, group = neutron_id, color = as.factor(neutron_id))) +
geom_path(size = 1, alpha = 0.8) +
geom_point(data = data_trajectoires %>% group_by(neutron_id) %>% slice(1),
shape = 15, size = 3) +
geom_point(data = data_trajectoires %>% group_by(neutron_id) %>% slice(n()),
shape = 16, size = 3) +
coord_fixed(xlim = c(0, 14), ylim = c(0, 14)) +
theme_bw() +
labs(title = "Trajectoires des 5 neutrons les plus actifs",
subtitle = "Carré = Départ, Rond = Arrivée",
color = "ID Neutron",
x = "Position X", y = "Position Y")
dashboard_data <- reacteur_3600 %>%
select(time_step, power_mw, temperature_k, pos_RE01) %>%
pivot_longer(cols = -time_step, names_to = "variable", values_to = "valeur") %>%
mutate(variable = factor(variable, levels = c("pos_RE01", "power_mw", "temperature_k")))
ggplot(dashboard_data, aes(x = time_step, y = valeur, color = variable)) +
geom_line(aes(size = variable)) +
facet_grid(variable ~ ., scales = "free_y") +
scale_color_manual(values = c("pos_RE01" = "#4DAF4A",
"power_mw" = "#E41A1C",
"temperature_k" = "#377EB8")) +
scale_size_manual(values = c("pos_RE01" = 1,
"power_mw" = 0.5,
"temperature_k" = 1)) +
theme_bw() +
labs(title = "Tableau de bord du réacteur",
subtitle = "Corrélation : Commande (Barres) -> Réaction (Puissance) -> Conséquence (Temp)",
x = "Temps (s)", y = "") +
theme(legend.position = "none")
ggplot(reacteur_3600, aes(x = time_step, y = power_mw)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", span = 0.1, color = "#E41A1C", size = 1.5) +
theme_minimal() +
labs(title = "Évolution lissée de la puissance")
max_power <- max(reacteur_3600$power_mw, na.rm = TRUE)
max_neutrons <- max(reacteur_3600$nb_neutrons, na.rm = TRUE)
max_rods <- 100
coeff_neutrons <- max_power / max_neutrons
coeff_rods <- max_power / max_rods
ggplot(reacteur_1000, aes(x = time_step)) +
geom_smooth(aes(y = power_mw, color = "Puissance (MW)"),
method = "loess", span = 0.1, size = 1, se = FALSE) +
geom_smooth(aes(y = nb_neutrons * coeff_neutrons, color = "Neutrons"),
method = "loess", span = 0.1, size = 1, se = FALSE) +
geom_smooth(aes(y = pos_RE01 * coeff_rods, color = "Barres (%)"),
method = "loess", linetype = "dashed", span = 0.1, size = 1, se = FALSE) +
scale_y_continuous(
name = "Puissance (MW)",
sec.axis = sec_axis(~ . / coeff_rods, name = "Position Barres (%)")
) +
scale_color_manual(name = "Légende", values = c(
"Puissance (MW)" = "#E41A1C", # Rouge
"Neutrons" = "orange",       # Bleu
"Barres (%)" = "#4DAF4A"      # Vert
)) +
theme_minimal() +
theme(
legend.position = "top",
axis.title.y.left = element_text(color = "#E41A1C", face = "bold"),
axis.title.y.right = element_text(color = "#4DAF4A", face = "bold")
) +
labs(title = "Dynamique du Réacteur : Barres vs Puissance/Neutrons",
subtitle = "Observez l'effet miroir : Quand la courbe Verte descend (Barres sorties), la Rouge monte.")
max_power <- max(reacteur_3600$power_mw, na.rm = TRUE)
max_neutrons <- max(reacteur_3600$nb_neutrons, na.rm = TRUE)
max_rods <- 100
coeff_neutrons <- max_power / max_neutrons
coeff_rods <- max_power / max_rods
ggplot(reacteur_3600, aes(x = time_step)) +
geom_smooth(aes(y = power_mw, color = "Puissance (MW)"),
method = "loess", span = 0.1, size = 1, se = FALSE) +
geom_smooth(aes(y = nb_neutrons * coeff_neutrons, color = "Neutrons"),
method = "loess", span = 0.1, size = 1, se = FALSE) +
geom_smooth(aes(y = pos_RE01 * coeff_rods, color = "Barres (%)"),
method = "loess", linetype = "dashed", span = 0.1, size = 1, se = FALSE) +
scale_y_continuous(
name = "Puissance (MW)",
sec.axis = sec_axis(~ . / coeff_rods, name = "Position Barres (%)")
) +
scale_color_manual(name = "Légende", values = c(
"Puissance (MW)" = "#E41A1C", # Rouge
"Neutrons" = "orange",       # Bleu
"Barres (%)" = "#4DAF4A"      # Vert
)) +
theme_minimal() +
theme(
legend.position = "top",
axis.title.y.left = element_text(color = "#E41A1C", face = "bold"),
axis.title.y.right = element_text(color = "#4DAF4A", face = "bold")
) +
labs(title = "Dynamique du Réacteur : Barres vs Puissance/Neutrons",
subtitle = "Observez l'effet miroir : Quand la courbe Verte descend (Barres sorties), la Rouge monte.")
ggplot(reacteur_3600, aes(x = pos_RE01, y = power_mw)) +
geom_point(alpha = 0.5, color = "darkgreen") +
geom_smooth(method = "loess", color = "red", se = FALSE) +
scale_x_reverse() +
theme_bw() +
labs(title = "Courbe d'efficacité des barres de contrôle",
subtitle = "Sensibilité du réacteur à la position des barres",
x = "Position Barres (0 = Totalement Sorties / 100 = Insérées)",
y = "Puissance Générée (MW)")
reacteur_3600$cat_barre <- cut(reacteur_3600$pos_RE01,
breaks = 3,
labels = c("Sortie", "Milieu", "Enfoncée"))
reacteur_3600$cat_power <- cut(reacteur_3600$power_mw,
breaks = 3,
labels = c("Faible", "Moyenne", "Forte"))
table_croisee <- table(reacteur_3600$cat_barre, reacteur_3600$cat_power)
mosaicplot(table_croisee,
main = "Corrélation Physique : Barres vs Puissance",
shade = TRUE,
las = 1,
xlab = "Position Barres (0=Sortie / 100=Enfoncée)",
ylab = "Puissance Thermique")
test_khi2 <- chisq.test(table_croisee)
print(test_khi2)
stats_neutrons <- traj_3600 %>%
arrange(neutron_id, time_step) %>%
group_by(neutron_id) %>%
mutate(
dx = x - lag(x, default = first(x)),
dy = y - lag(y, default = first(y)),
dist_step = sqrt(dx^2 + dy^2)
) %>%
summarise(
distance_totale = sum(dist_step, na.rm = TRUE),
duree_vie = n(),
.groups = "drop"
)
top_neutrons_ids <- stats_neutrons %>%
arrange(desc(distance_totale)) %>%
head(5) %>%
pull(neutron_id)
data_trajectoires <- traj_3600 %>%
filter(neutron_id %in% top_neutrons_ids) %>%
arrange(neutron_id, time_step)
ggplot(data_trajectoires, aes(x = x, y = y, group = neutron_id, color = as.factor(neutron_id))) +
geom_path(size = 1, alpha = 0.8) +
geom_point(data = data_trajectoires %>% group_by(neutron_id) %>% slice(1),
shape = 15, size = 3) +
geom_point(data = data_trajectoires %>% group_by(neutron_id) %>% slice(n()),
shape = 16, size = 3) +
coord_fixed(xlim = c(0, 14), ylim = c(0, 14)) +
theme_bw() +
labs(title = "Trajectoires des 5 neutrons les plus actifs",
subtitle = "Carré = Départ, Rond = Arrivée",
color = "ID Neutron",
x = "Position X", y = "Position Y")
dashboard_data <- reacteur_3600 %>%
select(time_step, power_mw, temperature_k, pos_RE01) %>%
pivot_longer(cols = -time_step, names_to = "variable", values_to = "valeur") %>%
mutate(variable = factor(variable, levels = c("pos_RE01", "power_mw", "temperature_k")))
ggplot(dashboard_data, aes(x = time_step, y = valeur, color = variable)) +
geom_line(aes(size = variable)) +
facet_grid(variable ~ ., scales = "free_y") +
scale_color_manual(values = c("pos_RE01" = "#4DAF4A",
"power_mw" = "#E41A1C",
"temperature_k" = "#377EB8")) +
scale_size_manual(values = c("pos_RE01" = 1,
"power_mw" = 0.5,
"temperature_k" = 1)) +
theme_bw() +
labs(title = "Tableau de bord du réacteur",
subtitle = "Corrélation : Commande (Barres) -> Réaction (Puissance) -> Conséquence (Temp)",
x = "Temps (s)", y = "") +
theme(legend.position = "none")
evolution_pop <- traj_3600 %>%
count(time_step, type) %>%
mutate(type = factor(type, levels = c("fast", "epithermal", "thermal")))
ggplot(evolution_pop, aes(x = time_step, y = n, fill = type)) +
geom_area(alpha = 0.9, size = 0) +
scale_fill_manual(
values = c(
"fast"       = "#d73027",
"epithermal" = "#fdae61",
"thermal"    = "#4575b4"
),
labels = c(
"fast"       = "thermal",
"epithermal" = "epithermal",
"thermal"    = "fast"
),
name = "Type de Neutron"
) +
theme_minimal() +
labs(title = "Dynamique de thermalisation",
x = "Temps",
y = "Nombre de neutrons")
ggplot(traj_3600, aes(x = x, y = y)) +
geom_bin2d(binwidth = c(1, 1)) +
scale_fill_viridis_c(option = "magma") +
coord_fixed() +
theme_minimal() +
labs(title = "Distribution spatiale de tous les neutrons",
subtitle = "Données cumulées (tous les pas de temps)",
fill = "NB Neutrons")
library(tidyverse)
library(ggplot2)
reacteur_3600 <- read.csv("C:\\Users\\Mathis\\OneDrive\\Documents\\PROJET\\Projet-Simulation-Aleatoire\\statistics\\statistics_output\\2025_11_29_17_51_29\\reactor_history_2025_11_29_17_51_29.csv")
#view(reacteur_3600)
traj_3600 <- read.csv("C:\\Users\\Mathis\\OneDrive\\Documents\\PROJET\\Projet-Simulation-Aleatoire\\statistics\\statistics_output\\2025_11_29_17_51_29\\neutrons_trajectories_2025_11_29_17_51_29.csv")
#view(traj_3600)
sommes_fissions <- reacteur_3600 %>%
summarise(
Fission_2 = sum(fissions_prod_2, na.rm = TRUE),
Fission_3 = sum(fissions_prod_3, na.rm = TRUE),
Fission_4 = sum(fissions_prod_4, na.rm = TRUE),
Fission_5 = sum(fissions_prod_5, na.rm = TRUE)
)
tableau_vertical <- sommes_fissions %>%
pivot_longer(cols = everything(), names_to = "Type_Fission", values_to = "Total")
print(tableau_vertical)
duree_vie_df <- traj_3600 %>%
group_by(neutron_id) %>%
summarise(
duree_totale = n()
)
ggplot(duree_vie_df, aes(x = duree_totale)) +
geom_histogram(binwidth = 1, fill = "purple") +
scale_y_sqrt() +
theme_minimal() +
labs(title = "Distribution (Échelle Racine Carrée)",
x = "Durée totale",
y = "Nombre de neutrons")
duree_par_type_indiv <- traj_3600 %>%
group_by(neutron_id, type) %>%
summarise(duree_etat = n(), .groups = "drop")
moyenne_par_type <- duree_par_type_indiv %>%
group_by(type) %>%
summarise(
duree_moyenne = mean(duree_etat),
ecart_type = sd(duree_etat),
nombre_neutrons_concernes = n()
)
moyenne_par_type$type <- factor(moyenne_par_type$type,
levels = c("fast", "epithermal", "thermal"))
ggplot(moyenne_par_type, aes(x = type, y = duree_moyenne, fill = type)) +
geom_col(color = "black", alpha = 1) +
geom_text(aes(label = round(duree_moyenne, 1)), vjust = -0.5, fontface = "bold") +
scale_fill_manual(values = c(
"fast"       = "#4575b4",
"epithermal" = "#fdae61",
"thermal"    = "#d73027"
)) +
theme_minimal() +
labs(title = "Temps de résidence moyen par état",
y = "Durée moyenne (pas de temps)",
x = "Type de neutron")
evolution_pop <- traj_3600 %>%
count(time_step, type) %>%
mutate(type = factor(type, levels = c("fast", "epithermal", "thermal")))
ggplot(evolution_pop, aes(x = time_step, y = n, fill = type)) +
geom_area(alpha = 0.9, size = 0) +
scale_fill_manual(
values = c(
"fast"       = "#d73027",
"epithermal" = "#fdae61",
"thermal"    = "#4575b4"
),
labels = c(
"fast"       = "thermal",
"epithermal" = "epithermal",
"thermal"    = "fast"
),
name = "Type de Neutron"
) +
theme_minimal() +
labs(title = "Dynamique de thermalisation",
x = "Temps",
y = "Nombre de neutrons")
ggplot(traj_3600, aes(x = x, y = y)) +
geom_bin2d(binwidth = c(1, 1)) +
scale_fill_viridis_c(option = "magma") +
coord_fixed() +
theme_minimal() +
labs(title = "Distribution spatiale de tous les neutrons",
subtitle = "Données cumulées (tous les pas de temps)",
fill = "NB Neutrons")
stats_neutrons <- traj_3600 %>%
arrange(neutron_id, time_step) %>%
group_by(neutron_id) %>%
mutate(
dx = x - lag(x, default = first(x)),
dy = y - lag(y, default = first(y)),
dist_step = sqrt(dx^2 + dy^2)
) %>%
summarise(
distance_totale = sum(dist_step, na.rm = TRUE),
duree_vie = n(),
.groups = "drop"
)
top_neutrons_ids <- stats_neutrons %>%
arrange(desc(distance_totale)) %>%
head(5) %>%
pull(neutron_id)
data_trajectoires <- traj_3600 %>%
filter(neutron_id %in% top_neutrons_ids) %>%
arrange(neutron_id, time_step)
ggplot(data_trajectoires, aes(x = x, y = y, group = neutron_id, color = as.factor(neutron_id))) +
geom_path(size = 1, alpha = 0.8) +
geom_point(data = data_trajectoires %>% group_by(neutron_id) %>% slice(1),
shape = 15, size = 3) +
geom_point(data = data_trajectoires %>% group_by(neutron_id) %>% slice(n()),
shape = 16, size = 3) +
coord_fixed(xlim = c(0, 14), ylim = c(0, 14)) +
theme_bw() +
labs(title = "Trajectoires des 5 neutrons les plus actifs",
subtitle = "Carré = Départ, Rond = Arrivée",
color = "ID Neutron",
x = "Position X", y = "Position Y")
dashboard_data <- reacteur_3600 %>%
select(time_step, power_mw, temperature_k, pos_RE01) %>%
pivot_longer(cols = -time_step, names_to = "variable", values_to = "valeur") %>%
mutate(variable = factor(variable, levels = c("pos_RE01", "power_mw", "temperature_k")))
ggplot(dashboard_data, aes(x = time_step, y = valeur, color = variable)) +
geom_line(aes(size = variable)) +
facet_grid(variable ~ ., scales = "free_y") +
scale_color_manual(values = c("pos_RE01" = "#4DAF4A",
"power_mw" = "#E41A1C",
"temperature_k" = "#377EB8")) +
scale_size_manual(values = c("pos_RE01" = 1,
"power_mw" = 0.5,
"temperature_k" = 1)) +
theme_bw() +
labs(title = "Tableau de bord du réacteur",
subtitle = "Corrélation : Commande (Barres) -> Réaction (Puissance) -> Conséquence (Temp)",
x = "Temps (s)", y = "") +
theme(legend.position = "none")
ggplot(reacteur_3600, aes(x = time_step, y = power_mw)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", span = 0.1, color = "#E41A1C", size = 1.5) +
theme_minimal() +
labs(title = "Évolution lissée de la puissance")
max_power <- max(reacteur_3600$power_mw, na.rm = TRUE)
max_neutrons <- max(reacteur_3600$nb_neutrons, na.rm = TRUE)
max_rods <- 100
coeff_neutrons <- max_power / max_neutrons
coeff_rods <- max_power / max_rods
ggplot(reacteur_3600, aes(x = time_step)) +
geom_smooth(aes(y = power_mw, color = "Puissance (MW)"),
method = "loess", span = 0.1, size = 1, se = FALSE) +
geom_smooth(aes(y = nb_neutrons * coeff_neutrons, color = "Neutrons"),
method = "loess", span = 0.1, size = 1, se = FALSE) +
geom_smooth(aes(y = pos_RE01 * coeff_rods, color = "Barres (%)"),
method = "loess", linetype = "dashed", span = 0.1, size = 1, se = FALSE) +
scale_y_continuous(
name = "Puissance (MW)",
sec.axis = sec_axis(~ . / coeff_rods, name = "Position Barres (%)")
) +
scale_color_manual(name = "Légende", values = c(
"Puissance (MW)" = "#E41A1C", # Rouge
"Neutrons" = "orange",       # Bleu
"Barres (%)" = "#4DAF4A"      # Vert
)) +
theme_minimal() +
theme(
legend.position = "top",
axis.title.y.left = element_text(color = "#E41A1C", face = "bold"),
axis.title.y.right = element_text(color = "#4DAF4A", face = "bold")
) +
labs(title = "Dynamique du Réacteur : Barres vs Puissance/Neutrons",
subtitle = "Observez l'effet miroir : Quand la courbe Verte descend (Barres sorties), la Rouge monte.")
ggplot(reacteur_3600, aes(x = pos_RE01, y = power_mw)) +
geom_point(alpha = 0.5, color = "darkgreen") +
geom_smooth(method = "loess", color = "red", se = FALSE) +
scale_x_reverse() +
theme_bw() +
labs(title = "Courbe d'efficacité des barres de contrôle",
subtitle = "Sensibilité du réacteur à la position des barres",
x = "Position Barres (0 = Totalement Sorties / 100 = Insérées)",
y = "Puissance Générée (MW)")
reacteur_3600$cat_barre <- cut(reacteur_3600$pos_RE01,
breaks = 3,
labels = c("Sortie", "Milieu", "Enfoncée"))
reacteur_3600$cat_power <- cut(reacteur_3600$power_mw,
breaks = 3,
labels = c("Faible", "Moyenne", "Forte"))
table_croisee <- table(reacteur_3600$cat_barre, reacteur_3600$cat_power)
mosaicplot(table_croisee,
main = "Corrélation Physique : Barres vs Puissance",
shade = TRUE,
las = 1,
xlab = "Position Barres (0=Sortie / 100=Enfoncée)",
ylab = "Puissance Thermique")
test_khi2 <- chisq.test(table_croisee)
print(test_khi2)
knit_with_parameters("~/PROJET/Projet-Simulation-Aleatoire/statistics/src/statistics.Rmd")
save.image("~/PROJET/Projet-Simulation-Aleatoire/statistics/src/env.RData")
